(this["webpackJsonpadaptive-svg"]=this["webpackJsonpadaptive-svg"]||[]).push([[0],{76:function(e,t,n){},77:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),c=n(10),r=n.n(c),s=(n(76),n.p,n(77),n(129)),i=n(95),l=n(13),u=n(2),j=Object(o.createContext)(),b=function(e){var t=Object(o.useState)(),n=Object(l.a)(t,2),a=n[0],c=n[1],r=Object(o.useState)("".concat("/adaptive-svg","/svg/focus-test.svg")),s=Object(l.a)(r,2),i=s[0],b=s[1],d=Object(o.useState)(),f=Object(l.a)(d,2),O=f[0],m=f[1],x=Object(o.useState)(),h=Object(l.a)(x,2),p=h[0],v=h[1],g=Object(o.useState)(),y=Object(l.a)(g,2),S=y[0],E=y[1],C=Object(o.useRef)(null);return Object(u.jsx)(j.Provider,{value:{mapPanZoom:a,setMapPanZoom:c,rootFocus:C,focusRoot:function(){C.current&&C.current.focus()},roomLabel:O,setRoomLabel:m,roomDescription:p,setRoomDescription:v,roomFlag:S,setRoomFlag:E,svgPath:i,setSvgPath:b},children:e.children})},d=n(26);var f=Object(o.createContext)(),O=function(e){var t=function(){var e=[{question:"Do you experience a motor impairment?",response:null},{question:"Do you experience a colour impairment?",response:null},{question:"Do you have low vision?",response:null},{question:"Do you experience total blindness?",response:null},{question:"Do you have difficulty reading?",response:null},{question:"Do you have difficulties operating doors?",response:null},{question:"Do obstacles disrupt your indoor navigation?",response:null}],t=Object(o.useState)(null),n=Object(l.a)(t,2),a=n[0],c=n[1],r=Object(o.useState)(null),s=Object(l.a)(r,2),i=s[0],u=s[1],j="cachedResponse";Object(o.useEffect)((function(){var t=b()||e,n=t.map((function(e){return Object(d.a)({},e)})),o=t.map((function(e){return Object(d.a)({},e)}));return c(n),u(o),function(){}}),[]);var b=function(){if("undefined"!==typeof localStorage)try{return JSON.parse(localStorage.getItem(j))}catch(e){console.error(e)}return null},f=function(e){return"undefined"!==typeof localStorage&&(localStorage.setItem(j,JSON.stringify(e)),!0)};return{editableResponse:a,commitedResponse:i,makeEdits:function(e,t){c(a.map((function(n,o){return e==o&&(n.response=t),n})))},commitEdits:function(){var e=a.map((function(e){return Object(d.a)({},e)}));u(e),f(e)},resetEdits:function(){var e=i.map((function(e){return Object(d.a)({},e)}));c(e)}}}(),n=t.editableResponse,a=t.commitedResponse,c=t.makeEdits,r=t.commitEdits,s=t.resetEdits,i=Object(o.useState)(0),j=Object(l.a)(i,2),b=j[0],O=j[1];return Object(o.useEffect)((function(){console.log("useEffect",a),O(a?function(e){if(e){for(var t=0,n=0;n<e.length;)t+=("yes"==e[n].response?1:0)*Math.pow(2,n),n++;return t}return 0}(a):0)}),[a]),Object(u.jsx)(f.Provider,{value:{editableResponse:n,commitedResponse:a,makeEdits:c,commitEdits:r,resetEdits:s,bitFlag:b},children:e.children})},m=n(65),x=n(42),h=n.n(x),p=n(81);var v=function(){var e=Object(o.useRef)(null),t=Object(o.useContext)(j),n=(t.mapPanZoom,t.setMapPanZoom),a=t.focusRoot,c=t.setRoomLabel,r=t.setRoomDescription,s=t.setRoomFlag,l=t.svgPath,b=Object(o.useContext)(f).bitFlag;Object(o.useEffect)((function(){x(d)}),[b]);var d=function(e){var t=e.dataset,n=t.layerFlag;t.layerState>-1?(e.tabIndex=(b&parseInt(n))>0?"1":"2",e.dataset.layerState=(b&parseInt(n))>0?"1":"0"):(e.tabIndex="3",e.dataset.layerState="-1")},O=Object(i.a)((function(e){return{map:{flex:3,margin:10,border:"8px black"},svg:{height:"100%",width:"100%"}}})),x=function(t){e.current&&e.current.querySelectorAll("[data-layer='root']").forEach((function(e){t(e)}))},v=function(t){var n=t.target,o=n.dataset.layerFlag,a=n.getAttribute("aria-labelledby"),i=n.getAttribute("aria-describedby"),l=e.current.getElementById(a).textContent,u=e.current.getElementById(i).textContent;c(l),r(u),s(o)},g=function(e){c(null),r(null),s(null)},y=O();return Object(u.jsx)(h.a,{className:y.map,handleKeys:["esc"],onKeyEvent:a,children:Object(u.jsx)(m.a,{className:y.svg,src:l,onError:function(e){},onLoad:function(t){var o=p(e.current,{zoomEnabled:!0,dblClickZoomEnabled:!1,preventMouseEventsDefault:!1});o.zoomAtPoint(1,{x:447,y:183}),n(o),x((function(e){e.addEventListener("focus",v),e.addEventListener("blur",g),d(e)}))},innerRef:e})})},g=n(134),y=n(141),S=n(139),E=n(138),C=n(137),R=n(140),F=n(135),k=n(136),D=n(132),P=n(36),N=n(64),w=n.n(N),I=n(133),L=n(142),q=n(144),Z=n(131),B=n(143),M=Object(s.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}})),K=function(e){var t=e.onChange,n=e.value,o=e.index;return Object(u.jsx)(B.a,{component:"fieldset",children:Object(u.jsxs)(q.a,{"aria-label":"gender",name:"gender"+o,value:n,onChange:t,row:!0,children:[Object(u.jsx)(Z.a,{value:"yes",control:Object(u.jsx)(L.a,{}),label:"Yes"}),Object(u.jsx)(Z.a,{value:"no",control:Object(u.jsx)(L.a,{}),label:"No"})]})})},A=a.a.forwardRef((function(e,t){return Object(u.jsx)(I.a,Object(d.a)({direction:"up",ref:t},e))}));function z(){var e=Object(o.useContext)(f),t=e.editableResponse,n=e.makeEdits,c=e.commitEdits,r=e.resetEdits,s=M(),i=Object(o.useState)(!1),j=Object(l.a)(i,2),b=j[0],d=j[1],O=function(){d(!0)},m=function(){r(),d(!1)};return Object(u.jsxs)("div",{children:[Object(u.jsx)(h.a,{handleFocusableElements:!0,className:s.map,handleKeys:["q"],onKeyEvent:O}),Object(u.jsx)(g.a,{variant:"outlined",color:"primary",onClick:O,children:"Open Questionnaire"}),Object(u.jsxs)(y.a,{fullScreen:!0,open:b,onClose:m,TransitionComponent:A,children:[Object(u.jsx)(F.a,{className:s.appBar,children:Object(u.jsxs)(k.a,{children:[Object(u.jsx)(D.a,{edge:"start",color:"inherit",onClick:m,"aria-label":"close",children:Object(u.jsx)(w.a,{})}),Object(u.jsx)(P.a,{variant:"h6",className:s.title,children:"Map Questionnaire"}),Object(u.jsx)(g.a,{autoFocus:!0,color:"inherit",onClick:function(){c(),d(!1)},children:"save"})]})}),Object(u.jsx)(C.a,{children:t&&t.map((function(e,t){return Object(u.jsxs)(a.a.Fragment,{children:[Object(u.jsxs)(E.a,{onKeyUp:function(e){return console.log(e,"eventUp")},onKeyPress:function(e){return console.log(e,"eventDown")},children:[Object(u.jsx)(S.a,{primary:e.question}),Object(u.jsx)(K,{onChange:function(e){n(t,e.target.value)},value:e.response,index:t})]}),Object(u.jsx)(R.a,{})]},t)}))})]})]})}var J=function(e){var t=e.setSvgPath;return Object(u.jsx)("input",{type:"file",name:"file",onChange:function(e){e.target.files[0];var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsDataURL(e.target.files[0])}})},Q=Object(s.a)((function(e){return{attributes:{flex:1,margin:10,display:"flex",flexDirection:"column",backgroundColor:"whitesmoke"},attribute:{flex:4,margin:10,stroke:"black",strokeWidth:5},buttons:{flex:1,margin:10,display:"flex",justify:"space-between",flexDirection:"row"}}}));var T=function(){var e=Q(),t=Object(o.useContext)(j),n=t.mapPanZoom,a=(t.setMapPanZoom,t.rootFocus),c=t.roomLabel,r=t.roomDescription,s=t.roomFlag,i=t.setSvgPath,l=Object(o.useContext)(f),b=(l.commitedResponse,l.bitFlag);return Object(u.jsxs)("div",{className:e.attributes,children:[Object(u.jsxs)("div",{className:e.attribute,children:[Object(u.jsxs)("label",{ref:a,children:[Object(u.jsx)("p",{children:"Questionnaire"}),Object(u.jsx)(z,{})]}),Object(u.jsxs)("label",{children:[Object(u.jsx)("p",{children:"Change SVG"}),Object(u.jsx)(J,{setSvgPath:i})]})]}),Object(u.jsxs)("div",{className:e.attribute,children:[Object(u.jsx)("h1",{children:"Bit Stuffing"}),Object(u.jsx)("h2",{children:b})]}),Object(u.jsxs)("div",{className:e.attribute,children:[Object(u.jsx)("h1",{children:"Selected Room"}),Object(u.jsxs)("h3",{children:["Name: ",c||"No Room Selected"]}),Object(u.jsxs)("h3",{children:["Description: ",r&&r]}),Object(u.jsxs)("h3",{children:["Room Flag: ",s&&s]})]}),Object(u.jsx)("div",{className:e.buttons,children:n&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("label",{children:["Zoom In",Object(u.jsx)("button",{onClick:function(){return n.zoomIn()},children:"+"})]}),Object(u.jsxs)("label",{children:["Zoom Out",Object(u.jsx)("button",{onClick:function(){return n.zoomOut()},children:"-"})]}),Object(u.jsxs)("label",{children:["Reset",Object(u.jsx)("button",{onClick:function(){return n.resetZoom()},children:"x"})]})]})})]})},U=Object(s.a)((function(e){return{root:{minHeight:"90vh",width:"100%",display:"flex",flexDirection:"row"}}}));var G=function(){U();var e=U();return Object(u.jsx)(b,{children:Object(u.jsx)(O,{children:Object(u.jsxs)("div",{className:e.root,children:[Object(u.jsx)(v,{}),Object(u.jsx)(T,{})]})})})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,145)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),o(e),a(e),c(e),r(e)}))};r.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(G,{})}),document.getElementById("root")),H()}},[[92,1,2]]]);
//# sourceMappingURL=main.9ac80d68.chunk.js.map
(this["webpackJsonpadaptive-svg"]=this["webpackJsonpadaptive-svg"]||[]).push([[0],{109:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),s=n(12),c=n.n(s),r=(n(93),n.p,n(94),n(136)),i=n(113),l=n(6),u=n(2),j=Object(o.createContext)(),d=function(e){var t=Object(o.useState)(),n=Object(l.a)(t,2),a=n[0],s=n[1],c=Object(o.useState)("".concat("/adaptive-svg","/svg/focus-test.svg")),r=Object(l.a)(c,2),i=r[0],d=r[1],b=Object(o.useState)(),f=Object(l.a)(b,2),p=f[0],O=f[1],h=Object(o.useState)(),m=Object(l.a)(h,2),x=m[0],v=m[1],g=Object(o.useState)(),y=Object(l.a)(g,2),E=y[0],S=y[1],R=Object(o.useRef)(null);return Object(u.jsx)(j.Provider,{value:{mapPanZoom:a,setMapPanZoom:s,rootFocus:R,focusRoot:function(){R.current&&R.current.focus()},roomLabel:p,setRoomLabel:O,roomDescription:x,setRoomDescription:v,roomFlag:E,setRoomFlag:S,svgPath:i,setSvgPath:d},children:e.children})},b=n(14);var f=Object(o.createContext)(),p=function(e){var t=function(){var e=[{question:"Do you experience a motor impairment?",response:null},{question:"Do you experience a colour impairment?",response:null},{question:"Do you have low vision?",response:null},{question:"Do you experience total blindness?",response:null},{question:"Do you have difficulty reading?",response:null},{question:"Do you have difficulties operating doors?",response:null},{question:"Do obstacles disrupt your indoor navigation?",response:null}],t=Object(o.useState)(null),n=Object(l.a)(t,2),a=n[0],s=n[1],c=Object(o.useState)(null),r=Object(l.a)(c,2),i=r[0],u=r[1],j="cachedResponse";Object(o.useEffect)((function(){var t=d()||e,n=t.map((function(e){return Object(b.a)({},e)})),o=t.map((function(e){return Object(b.a)({},e)}));return s(n),u(o),function(){}}),[]);var d=function(){if("undefined"!==typeof localStorage)try{return JSON.parse(localStorage.getItem(j))}catch(e){console.error(e)}return null},f=function(e){return"undefined"!==typeof localStorage&&(localStorage.setItem(j,JSON.stringify(e)),!0)};return{editableResponse:a,commitedResponse:i,makeEdits:function(e,t){s(a.map((function(n,o){return e==o&&(n.response=t),n})))},commitEdits:function(){var e=a.map((function(e){return Object(b.a)({},e)}));u(e),f(e)},resetEdits:function(){var e=i.map((function(e){return Object(b.a)({},e)}));s(e)}}}(),n=t.editableResponse,a=t.commitedResponse,s=t.makeEdits,c=t.commitEdits,r=t.resetEdits,i=Object(o.useMemo)((function(){return a?function(e){if(e){for(var t=0,n=0;n<e.length;)t+=("yes"==e[n].response?1:0)*Math.pow(2,n),n++;return t}return 0}(a):0}),[a]);return Object(u.jsx)(f.Provider,{value:{editableResponse:n,commitedResponse:a,makeEdits:s,commitEdits:c,resetEdits:r,bitFlag:i},children:e.children})},O=n(70),h=n(16),m=n.n(h),x=n(98),v=function(e){var t=e.mapPanZoom;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(m.a,{handleFocusableElements:!0,handleKeys:["shift+="],onKeyEvent:function(){return t.zoomIn()}}),Object(u.jsx)(m.a,{handleFocusableElements:!0,handleKeys:["shift+-"],onKeyEvent:function(){return t.zoomOut()}}),Object(u.jsx)(m.a,{handleFocusableElements:!0,handleKeys:["r"],onKeyEvent:function(){return t.resetZoom()}}),Object(u.jsx)(m.a,{handleFocusableElements:!0,handleKeys:["shift+right"],onKeyEvent:function(){return t.panBy({x:-20,y:0})}}),Object(u.jsx)(m.a,{handleFocusableElements:!0,handleKeys:["shift+left"],onKeyEvent:function(){return t.panBy({x:20,y:0})}}),Object(u.jsx)(m.a,{handleFocusableElements:!0,handleKeys:["shift+up"],onKeyEvent:function(){return t.panBy({x:0,y:20})}}),Object(u.jsx)(m.a,{handleFocusableElements:!0,handleKeys:["shift+down"],onKeyEvent:function(){return t.panBy({x:0,y:-20})}})]})};var g=function(){var e=Object(o.useRef)(null),t=Object(o.useContext)(j),n=t.mapPanZoom,a=t.setMapPanZoom,s=t.focusRoot,c=t.setRoomLabel,r=t.setRoomDescription,l=t.setRoomFlag,d=t.svgPath,b=Object(o.useContext)(f).bitFlag;Object(o.useEffect)((function(){g(p)}),[b]);var p=function(e){var t=e.dataset,n=t.layerFlag;if(t.layerState>-1){var o=(b&parseInt(n))>0;e.tabIndex=o?"1":"2",e.dataset.layerState=o?"1":"0"}else e.tabIndex="3",e.dataset.layerState="-1"},h=Object(i.a)((function(e){return{map:{flex:3,margin:10,border:"8px black"},svg:{height:"100%",width:"100%"}}})),g=function(t){e.current&&e.current.querySelectorAll("[data-layer='root']").forEach((function(e){t(e)}))},y=function(t){var n=t.target,o=n.dataset.layerFlag,a=n.getAttribute("aria-labelledby"),s=n.getAttribute("aria-describedby"),i=e.current.getElementById(a).textContent,u=e.current.getElementById(s).textContent;c(i),r(u),l(o)},E=function(e){c(null),r(null),l(null)},S=h();return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(v,{mapPanZoom:n}),Object(u.jsx)(m.a,{className:S.map,handleKeys:["esc"],onKeyEvent:s,children:Object(u.jsx)(O.a,{className:S.svg,src:d,onError:function(e){},onLoad:function(t){var n=x(e.current,{zoomEnabled:!0,dblClickZoomEnabled:!1,preventMouseEventsDefault:!1});n.zoomAtPoint(1,{x:447,y:183}),a(n),g((function(e){e.addEventListener("focus",y),e.addEventListener("blur",E),p(e)}))},innerRef:e})})]})},y=n(140),E=n(143),S=n(141),R=n(142),k=n(138),C=n(111),F=n(50),w=n.n(F),D=n(139),P=(n(144),n(146),n(137),n(145),n(66)),K=n(56),N=n(134),q=Object(i.a)((function(e){return{questionRow:{display:"flex",fontSize:20,flexDirection:"row",justifyContent:"space-between",paddingTop:10,paddingBottom:10,paddingLeft:5,paddingRight:5},question:{display:"flex",flexDirection:"row"}}})),B=a.a.createContext(null);function L(e){var t=e.children,n=e.label,o=q(),a=Object(P.a)(e),s=Object(K.b)(e,a),c=s.radioGroupProps,r=s.labelProps;return Object(u.jsxs)("div",Object(b.a)(Object(b.a)({},c),{},{className:o.questionRow,children:[Object(u.jsx)("span",Object(b.a)(Object(b.a)({},r),{},{children:n})),Object(u.jsx)("div",{className:o.question,children:Object(u.jsx)(B.Provider,{value:a,children:t})})]}))}function Z(e){var t=e.children,n=a.a.useContext(B),o=a.a.useRef(null),s=Object(K.a)(e,n,o).inputProps;return Object(u.jsxs)("label",{style:{display:"block"},children:[Object(u.jsx)("input",Object(b.a)(Object(b.a)({},s),{},{ref:o})),t]})}var I=function(e){var t=e.response,n=e.makeEdits;return t.map((function(e,t){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(L,{value:e.response,label:e.question,onChange:function(e){return function(e,t){n(t,e)}(e,t)},children:[Object(u.jsx)(Z,{value:"yes",children:"Yes"}),Object(u.jsx)(Z,{value:"no",children:"No"})]},t),Object(u.jsx)(N.a,{})]})}))},M=Object(r.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}})),z=a.a.forwardRef((function(e,t){return Object(u.jsx)(D.a,Object(b.a)({direction:"up",ref:t},e))}));function T(){var e=Object(o.useContext)(f),t=e.editableResponse,n=e.makeEdits,a=e.commitEdits,s=e.resetEdits,c=M(),r=Object(o.useState)(!1),i=Object(l.a)(r,2),j=i[0],d=i[1],b=function(){d(!0)},p=function(){s(),d(!1)};return Object(u.jsxs)("div",{children:[Object(u.jsx)(m.a,{handleFocusableElements:!0,handleKeys:["q"],onKeyEvent:b}),Object(u.jsx)(y.a,{variant:"outlined",color:"primary",onClick:b,children:"Open Questionnaire"}),Object(u.jsxs)(E.a,{fullScreen:!0,open:j,onClose:p,TransitionComponent:z,children:[Object(u.jsx)(S.a,{className:c.appBar,children:Object(u.jsxs)(R.a,{children:[Object(u.jsx)(k.a,{edge:"start",color:"inherit",onClick:p,"aria-label":"close",children:Object(u.jsx)(w.a,{})}),Object(u.jsx)(C.a,{variant:"h6",className:c.title,children:"Map Questionnaire"}),Object(u.jsx)(y.a,{autoFocus:!0,color:"inherit",onClick:function(){a(),d(!1)},children:"save"})]})}),t&&Object(u.jsx)(I,{response:t,makeEdits:n})]})]})}var A=Object(r.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},header:{display:"flex",fontSize:20,flexDirection:"row",justifyContent:"space-between",paddingTop:10,paddingBottom:10,paddingLeft:200,paddingRight:200},questionRow:{display:"flex",fontSize:20,flexDirection:"row",justifyContent:"space-between",paddingTop:10,paddingBottom:10,paddingLeft:10,paddingRight:10},question:{display:"flex",flexDirection:"row"}}})),J=a.a.forwardRef((function(e,t){return Object(u.jsx)(D.a,Object(b.a)({direction:"up",ref:t},e))}));function Q(){var e=Object(o.useContext)(f),t=(e.editableResponse,e.makeEdits,e.commitEdits,e.resetEdits,A()),n=Object(o.useState)(!1),s=Object(l.a)(n,2),c=s[0],r=s[1],i=function(){r(!0)},j=function(){r(!1)};return Object(u.jsxs)("div",{children:[Object(u.jsx)(m.a,{handleFocusableElements:!0,handleKeys:["k"],onKeyEvent:i}),Object(u.jsx)(y.a,{variant:"outlined",color:"primary",onClick:i,children:"Open Keyboard Shortcuts"}),Object(u.jsxs)(E.a,{fullScreen:!0,open:c,onClose:j,TransitionComponent:J,children:[Object(u.jsx)(S.a,{className:t.appBar,children:Object(u.jsxs)(R.a,{children:[Object(u.jsx)(k.a,{edge:"start",color:"inherit",onClick:j,"aria-label":"close",children:Object(u.jsx)(w.a,{})}),Object(u.jsx)(C.a,{variant:"h6",className:t.title,children:"Keyboard Shortcuts"})]})}),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:t.header,children:[Object(u.jsx)("span",{children:"Key"}),Object(u.jsx)("span",{children:"Description"})]}),[{key:"q",description:"Open questionnaire dialog"},{key:"k",description:"Open keyboard shortcuts dialog"},{key:"tab",description:"Move through elements"},{key:"Shift +  - / + / r",description:"Zoom out/in/reset on map"},{key:"Shift + arrow-keys (on main screen)",description:"Pan map"},{key:"esc when focused on map",description:"Move focus off map to the control menu"}].map((function(e,n){var o=e.key,s=e.description;return Object(u.jsxs)(a.a.Fragment,{children:[Object(u.jsxs)("div",{className:t.questionRow,children:[Object(u.jsx)("span",{children:o}),Object(u.jsx)("span",{children:s})]}),Object(u.jsx)(N.a,{})]},n)}))]})]})]})}var G=function(e){var t=e.setSvgPath;return Object(u.jsx)("input",{type:"file",name:"file",onChange:function(e){e.target.files[0];var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsDataURL(e.target.files[0])}})},H=Object(r.a)((function(e){return{attributes:{flex:1,margin:10,display:"flex",flexDirection:"column",backgroundColor:"whitesmoke"},attribute:{flex:4,margin:10,stroke:"black",strokeWidth:5},buttons:{flex:1,margin:10,display:"flex",justify:"space-between",flexDirection:"row"}}}));var U=function(){var e=H(),t=Object(o.useContext)(j),n=t.mapPanZoom,a=(t.setMapPanZoom,t.rootFocus),s=t.roomLabel,c=t.roomDescription,r=t.roomFlag,i=t.setSvgPath,l=Object(o.useContext)(f),d=(l.commitedResponse,l.bitFlag);return Object(u.jsxs)("div",{className:e.attributes,children:[Object(u.jsxs)("div",{className:e.attribute,children:[Object(u.jsxs)("label",{ref:a,children:[Object(u.jsx)("p",{children:"Questionnaire"}),Object(u.jsx)(T,{})]}),Object(u.jsxs)("label",{children:[Object(u.jsx)("p",{children:"Change SVG"}),Object(u.jsx)(G,{setSvgPath:i})]}),Object(u.jsxs)("label",{children:[Object(u.jsx)("p",{children:"Short Cuts"}),Object(u.jsx)(Q,{})]})]}),Object(u.jsxs)("div",{className:e.attribute,children:[Object(u.jsx)("h1",{children:"Bit Stuffing"}),Object(u.jsx)("h2",{children:d})]}),Object(u.jsxs)("div",{className:e.attribute,children:[Object(u.jsx)("h1",{children:"Selected Room"}),Object(u.jsxs)("h3",{children:["Name: ",s||"No Room Selected"]}),Object(u.jsxs)("h3",{children:["Description: ",c&&c]}),Object(u.jsxs)("h3",{children:["Room Flag: ",r&&r]})]}),Object(u.jsx)("div",{className:e.buttons,children:n&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("label",{children:["Zoom In",Object(u.jsx)("button",{onClick:function(){return n.zoomIn()},children:"+"})]}),Object(u.jsxs)("label",{children:["Zoom Out",Object(u.jsx)("button",{onClick:function(){return n.zoomOut()},children:"-"})]}),Object(u.jsxs)("label",{children:["Reset",Object(u.jsx)("button",{onClick:function(){return n.resetZoom()},children:"x"})]})]})})]})},V=Object(r.a)((function(e){return{root:{minHeight:"90vh",width:"100%",display:"flex",flexDirection:"row"}}}));var W=function(){V();var e=V();return Object(u.jsx)(d,{children:Object(u.jsx)(p,{children:Object(u.jsxs)("div",{className:e.root,children:[Object(u.jsx)(g,{}),Object(u.jsx)(U,{})]})})})},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,147)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),o(e),a(e),s(e),c(e)}))};c.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(W,{})}),document.getElementById("root")),Y()},93:function(e,t,n){},94:function(e,t,n){}},[[109,1,2]]]);
//# sourceMappingURL=main.1e10bb28.chunk.js.map